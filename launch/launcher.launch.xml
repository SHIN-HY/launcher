<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="launch_ouster" default="true" description="launch ouster"/>
    <arg name="launch_autoware_interface" default="true" description="launch autoware Cart interface"/>
    <arg name="launch_ros2_socketcan" default="true" description="launch ros2_socketcan"/>
    <arg name="run_qt_ros2_test" default="true" description="launch qt_ros2"/>
    <arg name="run_twist_controller" default="false" description="launch twist_controller"/>
    <arg name="launch_tf" default="true" description="launch tf"/>

    <group if="$(var launch_ouster)">
        <include file="$(find-pkg-share ouster_ros)/launch/driver.launch.py">
        </include>
    </group>

    <group if="$(var launch_autoware_interface)">
        <include file="$(find-pkg-share autoware_interface)/launch/autoware_interface.launch.xml">
            <!-- <param from="$(find-pkg-share autoware_interface)/config/autoware_interface.param.yaml"/> -->
        </include>
    </group>

    <group if="$(var launch_ros2_socketcan)">
        <push-ros-namespace namespace="socketcan/interface"/>
        <include file="$(find-pkg-share ros2_socketcan)/launch/socket_can_bridge.launch.xml">
            <arg name="interface" value="can0"/>
        </include>
    </group>

    <group if="$(var launch_ros2_socketcan)">
        <push-ros-namespace namespace="socketcan/motor"/>
        <include file="$(find-pkg-share ros2_socketcan)/launch/socket_can_receiver.launch.py">
            <arg name="interface" value="can1"/>
        </include>
    </group>

    <group if="$(var run_qt_ros2_test)">
        <node pkg="qt_ros2_test" exec="exec" name="qt_ros2_test" args="">
        </node>
    </group>

    <group if="$(var run_twist_controller)">
        <node pkg="twist_controller" exec="twist_controller" name="twist_controller" args="">
        </node>
    </group>

    <group if="$(var launch_tf)">
        <node pkg="tf2_ros" exec="static_transform_publisher" name="base_link_to_os_sensor" 
            args="0.25 0.0 1.0 0.0 0.0 0.0 base_link os_sensor"/>

        <node pkg="tf2_ros" exec="static_transform_publisher" name="base_link_to_imu_adma" 
            args="0.45 0.0 0.45 0.0 0.0 0.0 base_link imu_link"/>

        <node pkg="tf2_ros" exec="static_transform_publisher" name="base_link_to_gnss" 
            args="0.38 0.0 1.695 0.0 0.0 0.0 base_link gnss"/>
    </group>
</launch>